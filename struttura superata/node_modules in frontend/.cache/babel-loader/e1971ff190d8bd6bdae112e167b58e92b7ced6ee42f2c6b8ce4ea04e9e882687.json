{"ast":null,"code":"var _jsxFileName = \"/home/helplab.space/public_html/frontend/src/pages/Challenges.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useContext } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Challenges() {\n  _s();\n  const [challenges, setChallenges] = useState([]);\n  const navigate = useNavigate();\n  const {\n    user\n  } = useContext(AuthContext);\n\n  // Fetch delle sfide\n  const fetchChallenges = useCallback(async () => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    try {\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}/challenges`, {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      });\n      setChallenges(response.data);\n    } catch (error) {\n      var _error$response;\n      console.error('Errore nel recupero delle sfide:', error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        navigate('/login');\n      }\n    }\n  }, [navigate, user]);\n  useEffect(() => {\n    fetchChallenges();\n  }, [fetchChallenges]);\n\n  // Funzione per partecipare a una sfida\n  const participateInChallenge = async id => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    try {\n      await axios.post(`${process.env.REACT_APP_API_URL}/challenges/${id}/participate`, {}, {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      });\n      alert('Partecipazione registrata con successo!');\n      fetchChallenges(); // Aggiorna la lista delle sfide\n    } catch (error) {\n      var _error$response2, _error$response3, _error$response3$data;\n      console.error('Errore nella partecipazione:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      alert(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Errore nella partecipazione alla sfida.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Sfide Sostenibili\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), challenges.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Nessuna sfida disponibile.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: challenges.map(challenge => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: challenge.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: challenge.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Punti: \", challenge.points]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => participateInChallenge(challenge.id),\n          children: \"Partecipa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this)]\n      }, challenge.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(Challenges, \"xd4L2JVIS2RtwDy8fEovfZ3c8I8=\", false, function () {\n  return [useNavigate];\n});\n_c = Challenges;\nexport default Challenges;\nvar _c;\n$RefreshReg$(_c, \"Challenges\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","axios","useNavigate","AuthContext","jsxDEV","_jsxDEV","Challenges","_s","challenges","setChallenges","navigate","user","fetchChallenges","response","get","process","env","REACT_APP_API_URL","headers","Authorization","token","data","error","_error$response","console","status","participateInChallenge","id","post","alert","_error$response2","_error$response3","_error$response3$data","message","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","challenge","title","description","points","onClick","_c","$RefreshReg$"],"sources":["/home/helplab.space/public_html/frontend/src/pages/Challenges.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\n\nfunction Challenges() {\n  const [challenges, setChallenges] = useState([]);\n  const navigate = useNavigate();\n  const { user } = useContext(AuthContext);\n\n  // Fetch delle sfide\n  const fetchChallenges = useCallback(async () => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    \n    try {\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}/challenges`, {\n        headers: { Authorization: `Bearer ${user.token}` }\n      });\n      setChallenges(response.data);\n    } catch (error) {\n      console.error('Errore nel recupero delle sfide:', error);\n      if (error.response?.status === 401) {\n        navigate('/login');\n      }\n    }\n  }, [navigate, user]);\n\n  useEffect(() => {\n    fetchChallenges();\n  }, [fetchChallenges]);\n\n  // Funzione per partecipare a una sfida\n  const participateInChallenge = async (id) => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n\n    try {\n      await axios.post(`${process.env.REACT_APP_API_URL}/challenges/${id}/participate`, {}, {\n        headers: { Authorization: `Bearer ${user.token}` }\n      });\n      alert('Partecipazione registrata con successo!');\n      fetchChallenges(); // Aggiorna la lista delle sfide\n    } catch (error) {\n      console.error('Errore nella partecipazione:', error.response?.data || error.message);\n      alert(error.response?.data?.message || 'Errore nella partecipazione alla sfida.');\n    }\n  };\n\n  return (\n    <div>\n      <h2>Sfide Sostenibili</h2>\n      {challenges.length === 0 ? (\n        <p>Nessuna sfida disponibile.</p>\n      ) : (\n        <ul>\n          {challenges.map((challenge) => (\n            <li key={challenge.id}>\n              <h3>{challenge.title}</h3>\n              <p>{challenge.description}</p>\n              <p>Punti: {challenge.points}</p>\n              <button onClick={() => participateInChallenge(challenge.id)}>Partecipa</button>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default Challenges;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}